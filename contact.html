<!DOCTYPE html>
<html lang="en">
<<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us | Janit</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-background-dark text-text-light min-h-screen flex flex-col">

    <header>
    <nav>
        <a href="index.html" class="logo">
            <img src="logoo.png" alt="Janit Edit Logo" class="logo-img">
            <span class="logo-text">JANIT EDIT <span class="sub-text">VIDEO EDITOR</span></span>
        </a>
        <div class="menu-icon">
            <i class="fas fa-bars"></i>
        </div>
        <ul id="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="assets.html">My Assets</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </nav>
</header>
    <!-- Main Content Area (Contact Form) -->
    <main class="flex-grow">
        <div id="messages-display"></div>
        <section class="assets-section">
            <div class="text-center mb-12">
                <h1>Get In Touch</h1>
                <p>
                    Have a question, a project idea, or just want to collaborate? I'd love to hear from you.
                </p>
            </div>
            
            <div class="bg-card-dark p-8 md:p-12 rounded-xl shadow-2xl border border-gray-700">
                <form action="#" class="contact-form space-y-6">
                    <div>
                        <label for="name" class="sr-only">Your Name</label>
                        <input type="text" id="name" name="name" placeholder="Your Name" required
                               class="w-full p-4 bg-background-dark/80 border border-gray-600 rounded-lg text-text-light placeholder-gray-500 focus:ring-2 focus:ring-accent-indigo focus:border-accent-indigo transition duration-200">
                    </div>
                    <div>
                        <label for="email" class="sr-only">Your Email</label>
                        <input type="email" id="email" name="email" placeholder="Your Email" required
                               class="w-full p-4 bg-background-dark/80 border border-gray-600 rounded-lg text-text-light placeholder-gray-500 focus:ring-2 focus:ring-accent-indigo focus:border-accent-indigo transition duration-200">
                    </div>
                    <div>
                        <label for="message" class="sr-only">Your Message</label>
                        <textarea id="message" name="message" rows="5" placeholder="Your Message" required
                                  class="w-full p-4 bg-background-dark/80 border border-gray-600 rounded-lg text-text-light placeholder-gray-500 focus:ring-2 focus:ring-accent-indigo focus:border-accent-indigo transition duration-200"></textarea>
                    </div>
                    <button type="submit" 
                            class="cta-button ">
                        Send Message
                    </button>
                    <div id="status-message" class="text-center pt-4 text-sm text-green-400 hidden">
                        <!-- Success/Error message will be displayed here -->
                    </div>
                </form>
            </div>
            <div class="mt-12">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold text-center mb-6">Latest Messages ðŸ’¬</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="messages-display" class="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-center text-gray-500" id="loading-message">Loading messages...</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </section>
Â  Â  </main>
        </section>
    </main>

    <!-- Footer -->
    <footer id="contact-info" class="bg-card-dark/50 py-10 border-t border-gray-700 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl font-bold text-text-light mb-3">Connect With Me</h2>
            <p class="text-lg text-gray-400 mb-8">Follow me on my social media platforms for updates!</p>
            
            <!-- Social Links -->
            <div class="social-links flex justify-center space-x-6 text-2xl mb-8">
                <a href="https://www.instagram.com/janit_edit_/" target="_blank" aria-label="Instagram"
                   class="text-text-light hover:text-pink-500 transition duration-300 transform hover:scale-110">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.youtube.com/@Janit_Edit" target="_blank" aria-label="YouTube"
                   class="text-text-light hover:text-red-500 transition duration-300 transform hover:scale-110">
                    <i class="fab fa-youtube"></i>
                </a>
                <a href="https://www.linkedin.com/in/janit-singh-7255a4310/?locale=en_US" target="_blank" aria-label="LinkedIn"
                   class="text-text-light hover:text-blue-500 transition duration-300 transform hover:scale-110">
                    <i class="fab fa-linkedin"></i>
                </a>
            </div>

            <p class="copyright text-sm text-gray-500 pt-4 border-t border-gray-700/50">&copy; 2025 Janit. All Rights Reserved. Built with professionalism and passion.</p>
        </div>
    </footer>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.querySelector('.contact-form');
        const statusMessage = document.getElementById('status-message');
        const messagesDisplay = document.getElementById('messages-display');

        // Function to fetch and display messages
        const fetchMessages = async () => {
            messagesDisplay.innerHTML = '<p class="text-center text-gray-500">Loading messages...</p>';
            try {
                // Fetch messages from the new PHP file
                const response = await fetch('/api/fetchMessages');
 
                const data = await response.json();

                if (data.success && data.messages.length > 0) {
                    messagesDisplay.innerHTML = ''; // Clear loading message

                    data.messages.forEach(msg => {
                        const messageElement = document.createElement('div');
                        messageElement.className = 'p-4 bg-background-dark/50 border border-gray-700 rounded-lg shadow-md';
                        
                        // Using template literals for cleaner structure
                        messageElement.innerHTML = `
                            <p class="text-sm text-gray-400 mb-1"><strong>${msg.name}</strong> (${msg.email})</p>
                            <p class="text-text-light whitespace-pre-wrap">${msg.message}</p>
                            <p class="text-xs text-gray-500 mt-2 text-right">Sent on: ${new Date(msg.created_at).toLocaleString()}</p>
                        `;
                        messagesDisplay.appendChild(messageElement);
                    });
                } else if (data.success && data.messages.length === 0) {
                    messagesDisplay.innerHTML = '<p class="text-center text-lg text-gray-500">No messages posted yet. Be the first! âœ¨</p>';
                } else {
                    messagesDisplay.innerHTML = '<p class="text-center text-lg text-red-400">Error loading messages.</p>';
                }

            } catch (error) {
                console.error('Fetch error:', error);
                messagesDisplay.innerHTML = '<p class="text-center text-lg text-red-400">Connection error: Could not fetch messages.</p>';
            }
        };

        // Form Submission Handler
        form.addEventListener('submit', async (e) => {
            e.preventDefault(); // Stop default form submission
            
            const formData = new FormData(form);
            const submitButton = form.querySelector('button[type="submit"]');

            // Disable button and show loading state
            submitButton.textContent = 'Sending...';
            submitButton.disabled = true;
            statusMessage.textContent = '';
            statusMessage.classList.add('hidden');

            try {
                // Submit data to submit.php
                const response = await fetch('/api/submit', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                name: formData.get('name'),
                email: formData.get('email'),
                message: formData.get('message')
                })
});

                
                const data = await response.json();

                if (data.success) {
                    statusMessage.textContent = data.message;
                    statusMessage.className = 'text-center pt-4 text-sm text-green-400';
                    form.reset(); // Clear the form
                    fetchMessages(); // **Messages ko dobara load karein**
                } else {
                    statusMessage.textContent = data.message;
                    statusMessage.className = 'text-center pt-4 text-sm text-red-400';
                }

            } catch (error) {
                console.error('Submission error:', error);
                statusMessage.textContent = 'Network error. Please try again.';
                statusMessage.className = 'text-center pt-4 text-sm text-red-400';
            } finally {
                // Re-enable button and hide status message after a short delay
                submitButton.textContent = 'Send Message';
                submitButton.disabled = false;
                statusMessage.classList.remove('hidden');
            }
        });

        // Load messages when the page loads
        fetchMessages(); 
    });
</script>

</body>
</html>
